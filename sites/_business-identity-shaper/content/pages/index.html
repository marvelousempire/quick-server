<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="../../../config.js"></script>
<script>
  // Set SEO and theme from config
  document.addEventListener('DOMContentLoaded', function() {
    if (window.CONFIG) {
      const config = window.CONFIG;
      // Title
      document.title = config.seo?.metaTitle || config.site?.title || 'Example Site';
      // Theme color
      const themeColor = config.site?.themeColor || '#6366f1';
      let metaTheme = document.querySelector('meta[name="theme-color"]');
      if (!metaTheme) {
        metaTheme = document.createElement('meta');
        metaTheme.name = 'theme-color';
        document.head.appendChild(metaTheme);
      }
      metaTheme.setAttribute('content', themeColor);
      // SEO meta tags
      if (config.seo) {
        let metaDesc = document.querySelector('meta[name="description"]');
        if (!metaDesc) {
          metaDesc = document.createElement('meta');
          metaDesc.name = 'description';
          document.head.appendChild(metaDesc);
        }
        metaDesc.setAttribute('content', config.seo.metaDescription || config.site?.description || '');
        // Open Graph
        ['og:title', 'og:description', 'og:image', 'og:type'].forEach(prop => {
          const key = prop.replace('og:', '');
          if (config.seo[`og${key.charAt(0).toUpperCase() + key.slice(1)}`]) {
            let meta = document.querySelector(`meta[property="${prop}"]`);
            if (!meta) {
              meta = document.createElement('meta');
              meta.setAttribute('property', prop);
              document.head.appendChild(meta);
            }
            meta.setAttribute('content', config.seo[`og${key.charAt(0).toUpperCase() + key.slice(1)}`]);
          }
        });
      }
      // Language
      if (config.site?.language) {
        document.documentElement.lang = config.site.language;
      }
    }
  });
</script>
<title>Example Site</title>
<meta name="theme-color" content="#6366f1">
<style>
:root {
  --bg: #0f172a;
  --card: #1e293b;
  --ink: #f1f5f9;
  --muted: #94a3b8;
  --brand: #6366f1;
  --brand2: #8b5cf6;
  --accent: #f59e0b;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --info: #3b82f6;
  --line: #334155;
  --shadow: rgba(0,0,0,0.3);
  --overlay: rgba(0,0,0,0.5);
  --radius: 12px;
  --gap: 20px;
  --wide: 1200px;
}

* { box-sizing: border-box; }

html, body {
  background: var(--bg);
  color: var(--ink);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  padding: 0;
  line-height: 1.6;
  scroll-behavior: smooth;
}

.wrap {
  max-width: var(--wide, 1200px);
  margin: 0 auto;
  padding: clamp(20px, 4vw, 60px);
}

/* Navigation */
nav {
  position: sticky;
  top: 0;
  z-index: 100;
  background: color-mix(in srgb, var(--bg) 90%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--line);
  padding: 16px 0;
}

nav .nav-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 900;
  font-size: 20px;
  color: var(--ink);
  text-decoration: none;
}

.logo .dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--brand), var(--brand2));
}

nav .links {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

nav .links a {
  padding: 10px 16px;
  border-radius: 8px;
  color: var(--muted);
  text-decoration: none;
  transition: all 0.2s;
  font-size: 14px;
}

nav .links a:hover {
  background: color-mix(in srgb, var(--brand) 15%, transparent);
  color: var(--brand);
}

/* Hero */
header.hero {
  text-align: center;
  padding: 60px 0 40px;
  position: relative;
}

header.hero h1 {
  font-size: clamp(36px, 5vw, 56px);
  font-weight: 900;
  margin: 0 0 16px;
  background: linear-gradient(135deg, var(--ink), var(--brand));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

header.hero .subtitle {
  font-size: clamp(18px, 2.5vw, 24px);
  color: var(--muted);
  margin: 0 0 24px;
  font-weight: 600;
}

header.hero .description {
  font-size: clamp(16px, 2vw, 18px);
  color: var(--muted);
  max-width: 600px;
  margin: 0 auto 32px;
  line-height: 1.7;
}

.cta-group {
  display: flex;
  gap: 16px;
  justify-content: center;
  flex-wrap: wrap;
}

.cta-button {
  display: inline-block;
  padding: 14px 28px;
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  color: white;
  text-decoration: none;
  border-radius: 10px;
  font-weight: 700;
  font-size: 16px;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 12px color-mix(in srgb, var(--brand) 30%, transparent);
  border: none;
  cursor: pointer;
}

.cta-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px color-mix(in srgb, var(--brand) 40%, transparent);
}

.cta-button.outline {
  background: transparent;
  border: 2px solid var(--brand);
  color: var(--brand);
  box-shadow: none;
}

.cta-button.outline:hover {
  background: color-mix(in srgb, var(--brand) 10%, transparent);
}

/* Features Grid */
.features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--gap);
  margin: 60px 0;
}

.feature-card {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 32px;
  text-align: center;
  transition: all 0.3s;
}

.feature-card:hover {
  transform: translateY(-4px);
  border-color: var(--brand);
  box-shadow: 0 8px 24px color-mix(in srgb, var(--shadow) 50%, transparent);
}

.feature-card .icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.feature-card h3 {
  font-size: 20px;
  font-weight: 800;
  margin: 0 0 12px;
  color: var(--ink);
}

.feature-card p {
  color: var(--muted);
  margin: 0;
  line-height: 1.6;
}

/* Sections */
.section {
  margin: 60px 0;
  padding: 40px;
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
}

.section h2 {
  font-size: 32px;
  font-weight: 900;
  margin: 0 0 12px;
  color: var(--ink);
}

.section .subtitle {
  font-size: 18px;
  color: var(--muted);
  margin: 0 0 20px;
}

.section p {
  color: var(--muted);
  line-height: 1.8;
  font-size: 16px;
}

/* Stats */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--gap);
  margin: 60px 0;
}

.stat-card {
  text-align: center;
  padding: 32px;
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
}

.stat-card .icon {
  font-size: 40px;
  margin-bottom: 12px;
}

.stat-card .value {
  font-size: 36px;
  font-weight: 900;
  color: var(--brand);
  margin: 0 0 8px;
}

.stat-card .label {
  color: var(--muted);
  font-size: 14px;
}

/* Tabs */
.tabs-container {
  margin-top: 20px;
}
.tabs-header {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  border-bottom: 1px solid var(--line);
}
.tab-btn {
  padding: 12px 20px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--muted);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}
.tab-btn:hover {
  color: var(--ink);
  background: color-mix(in srgb, var(--brand) 10%, transparent);
}
.tab-btn.active {
  color: var(--brand);
  border-bottom-color: var(--brand);
}
.tab-content {
  display: none;
}
.tab-content.active {
  display: block;
}
.remote-status {
  padding: 24px;
  background: color-mix(in srgb, var(--card) 90%, transparent);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  text-align: center;
  color: var(--muted);
}
.remote-status a {
  color: var(--brand);
  text-decoration: underline;
}
.remote-loading {
  padding: 24px;
  text-align: center;
  color: var(--muted);
}
.remote-error {
  padding: 24px;
  background: color-mix(in srgb, var(--error) 10%, transparent);
  border: 1px solid var(--error);
  border-radius: var(--radius);
  color: var(--error);
  text-align: center;
}

/* Testimonials */
.testimonials {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--gap);
  margin: 60px 0;
}

.testimonial-card {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 32px;
}

.testimonial-card .quote {
  font-size: 16px;
  line-height: 1.7;
  color: var(--ink);
  margin: 0 0 20px;
  font-style: italic;
}

.testimonial-card .author {
  display: flex;
  align-items: center;
  gap: 12px;
}

.testimonial-card .author-info h4 {
  margin: 0;
  font-size: 16px;
  color: var(--ink);
}

.testimonial-card .author-info p {
  margin: 0;
  font-size: 14px;
  color: var(--muted);
}

.testimonial-card .rating {
  color: var(--accent);
  font-size: 18px;
  margin-top: 8px;
}

/* Services */
.services {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--gap);
  margin: 60px 0;
}

.service-card {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 32px;
}

.service-card .icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.service-card h3 {
  font-size: 24px;
  font-weight: 800;
  margin: 0 0 12px;
  color: var(--ink);
}

.service-card .price {
  font-size: 20px;
  font-weight: 700;
  color: var(--brand);
  margin: 0 0 16px;
}

.service-card .features-list {
  list-style: none;
  padding: 0;
  margin: 0 0 20px;
}

.service-card .features-list li {
  padding: 8px 0;
  color: var(--muted);
  border-bottom: 1px solid var(--line);
}

.service-card .features-list li:last-child {
  border-bottom: none;
}

/* Pricing */
.pricing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--gap);
  margin: 60px 0;
}

.pricing-card {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 2px solid var(--line);
  border-radius: var(--radius);
  padding: 40px;
  position: relative;
  transition: all 0.3s;
}

.pricing-card.popular {
  border-color: var(--brand);
  transform: scale(1.05);
}

.pricing-card.popular::before {
  content: 'Popular';
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--brand);
  color: white;
  padding: 4px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
}

.pricing-card .name {
  font-size: 24px;
  font-weight: 800;
  margin: 0 0 8px;
  color: var(--ink);
}

.pricing-card .price {
  font-size: 48px;
  font-weight: 900;
  color: var(--brand);
  margin: 0 0 8px;
}

.pricing-card .period {
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 16px;
}

.pricing-card .description {
  color: var(--muted);
  margin-bottom: 24px;
}

.pricing-card .features-list {
  list-style: none;
  padding: 0;
  margin: 0 0 32px;
}

.pricing-card .features-list li {
  padding: 12px 0;
  color: var(--ink);
  border-bottom: 1px solid var(--line);
}

.pricing-card .features-list li:last-child {
  border-bottom: none;
}

/* FAQ */
.faq {
  margin: 60px 0;
}

.faq-item {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 16px;
}

.faq-item .question {
  font-size: 18px;
  font-weight: 700;
  color: var(--ink);
  margin: 0 0 12px;
}

.faq-item .answer {
  color: var(--muted);
  line-height: 1.7;
  margin: 0;
}

/* Footer */
footer {
  margin-top: 80px;
  padding-top: 40px;
  border-top: 1px solid var(--line);
  color: var(--muted);
}

.footer-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 40px;
  margin-bottom: 40px;
}

.footer-column h4 {
  font-size: 16px;
  font-weight: 700;
  color: var(--ink);
  margin: 0 0 16px;
}

.footer-column ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-column ul li {
  margin-bottom: 12px;
}

.footer-column ul li a {
  color: var(--muted);
  text-decoration: none;
  transition: color 0.2s;
}

.footer-column ul li a:hover {
  color: var(--brand);
}

.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 32px;
  border-top: 1px solid var(--line);
  flex-wrap: wrap;
  gap: 20px;
}

.footer-social {
  display: flex;
  gap: 16px;
}

.footer-social a {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: color-mix(in srgb, var(--card) 90%, transparent);
  border: 1px solid var(--line);
  border-radius: 50%;
  color: var(--muted);
  text-decoration: none;
  transition: all 0.2s;
  font-size: 18px;
}

.footer-social a:hover {
  background: var(--brand);
  border-color: var(--brand);
  color: white;
  transform: translateY(-2px);
}

.newsletter {
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), color-mix(in srgb, var(--card) 95%, transparent));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 32px;
  margin: 40px 0;
  text-align: center;
}

.newsletter h3 {
  margin: 0 0 8px;
  color: var(--ink);
}

.newsletter p {
  color: var(--muted);
  margin: 0 0 24px;
}

.newsletter-form {
  display: flex;
  gap: 12px;
  max-width: 400px;
  margin: 0 auto;
}

.newsletter-form input {
  flex: 1;
  padding: 12px 16px;
  background: var(--bg);
  border: 1px solid var(--line);
  border-radius: 8px;
  color: var(--ink);
  font-size: 14px;
}

.newsletter-form button {
  padding: 12px 24px;
  background: var(--brand);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  transition: background 0.2s;
}

.newsletter-form button:hover {
  background: var(--brand2);
}

.info-box {
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  border: 1px solid color-mix(in srgb, var(--brand) 30%, transparent);
  border-radius: var(--radius);
  padding: 24px;
  margin: 32px 0;
}

.info-box h3 {
  font-size: 18px;
  font-weight: 800;
  margin: 0 0 12px;
  color: var(--brand);
}

.info-box ol {
  margin: 16px 0;
  padding-left: 24px;
  color: var(--muted);
}

.info-box li {
  margin: 8px 0;
  line-height: 1.7;
}

.info-box code {
  background: color-mix(in srgb, var(--card) 95%, transparent);
  padding: 3px 8px;
  border-radius: 4px;
  font-family: ui-monospace, 'SF Mono', Monaco, Consolas, monospace;
  font-size: 14px;
  color: var(--brand);
  border: 1px solid var(--line);
}

/* Back to top */
.back-to-top {
  position: fixed;
  bottom: 32px;
  right: 32px;
  width: 48px;
  height: 48px;
  background: var(--brand);
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  box-shadow: 0 4px 12px color-mix(in srgb, var(--brand) 40%, transparent);
  transition: all 0.2s;
  z-index: 50;
}

.back-to-top:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px color-mix(in srgb, var(--brand) 50%, transparent);
}

.back-to-top.visible {
  display: flex;
}

@media (max-width: 768px) {
  .features, .stats, .testimonials, .services, .pricing {
    grid-template-columns: 1fr;
  }
  
  nav .nav-inner {
    flex-direction: column;
    align-items: flex-start;
  }
  
  nav .links {
    width: 100%;
  }
  
  .cta-group {
    flex-direction: column;
  }
  
  .footer-bottom {
    flex-direction: column;
    text-align: center;
  }
  
  .pricing-card.popular {
    transform: none;
  }
}
</style>
</head>
<body>
<nav>
  <div class="wrap">
    <div class="nav-inner">
      <a href="/" class="logo" id="logo">
        <span class="dot"></span>
        <span>Example Site</span>
      </a>
      <div class="links" id="navLinks">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
      </div>
    </div>
  </div>
</nav>

<main>
  <header class="hero wrap" id="hero">
    <h1 id="heroTitle">Welcome to Your Site</h1>
    <p class="subtitle" id="heroSubtitle">This is a dynamic template controlled by config.json</p>
    <p class="description" id="heroDescription">Customize everything by editing the config.json file. No code changes needed!</p>
    <div class="cta-group" id="ctaGroup">
      <a href="/about.html" class="cta-button" id="ctaPrimary">Get Started</a>
    </div>
  </header>

  <!-- Stats Section with Local/Remote Tabs -->
  <section class="wrap" id="statsSection" style="display: none;">
    <div class="tabs-container" id="statsTabsContainer">
      <div class="tabs-header">
        <button class="tab-btn active" data-tab="local">üè† Local</button>
        <button class="tab-btn" data-tab="remote" id="remoteTabBtn">üåê Remote</button>
      </div>
      <div class="tab-content active" id="tab-local">
        <div class="stats" id="stats"></div>
      </div>
      <div class="tab-content" id="tab-remote">
        <div id="remoteStatsContainer">
          <div class="remote-status" id="remoteStatus">
            <p>Configure remote deployment in <a href="settings.html" onclick="navigateToSettings(event)">Settings ‚Üí Deployment</a> to view remote stats.</p>
          </div>
          <div class="stats" id="remoteStats" style="display: none;"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="wrap">
    <div class="features" id="features"></div>
  </section>

  <!-- Info Box -->
  <section class="wrap">
    <div class="info-box">
      <h3>üöÄ To create your own site:</h3>
      <ol>
        <li>Create a folder in <code>sites/</code> (e.g., <code>sites/my-site/</code>)</li>
        <li>Copy this example site as a starting point</li>
        <li>Edit <code>config.json</code> to customize your site</li>
        <li>Add your HTML files to <code>sites/my-site/pages/</code> or directly in <code>sites/my-site/</code></li>
        <li>Restart the server and your site is live!</li>
      </ol>
    </div>
  </section>

  <!-- Content Sections -->
  <section class="wrap" id="sectionsContainer"></section>

  <!-- Services Section -->
  <section class="wrap" id="servicesSection" style="display: none;">
    <h2 style="text-align: center; margin-bottom: 40px; font-size: 36px;">Our Services</h2>
    <div class="services" id="services"></div>
  </section>

  <!-- Pricing Section -->
  <section class="wrap" id="pricingSection" style="display: none;">
    <h2 style="text-align: center; margin-bottom: 40px; font-size: 36px;">Pricing Plans</h2>
    <div class="pricing" id="pricing"></div>
  </section>

  <!-- Testimonials Section -->
  <section class="wrap" id="testimonialsSection" style="display: none;">
    <h2 style="text-align: center; margin-bottom: 40px; font-size: 36px;">What Our Clients Say</h2>
    <div class="testimonials" id="testimonials"></div>
  </section>

  <!-- FAQ Section -->
  <section class="wrap" id="faqSection" style="display: none;">
    <h2 style="text-align: center; margin-bottom: 40px; font-size: 36px;">Frequently Asked Questions</h2>
    <div class="faq" id="faq"></div>
  </section>

  <!-- Newsletter Section -->
  <section class="wrap" id="newsletterSection" style="display: none;">
    <div class="newsletter" id="newsletter"></div>
  </section>

  <!-- Footer -->
  <footer class="wrap" id="footer">
    <div class="footer-grid" id="footerGrid"></div>
    <div class="footer-bottom">
      <p id="footerText">Built with LearnMappers Server</p>
      <p id="footerCopyright" style="color: var(--muted); font-size: 14px;"></p>
      <div class="footer-social" id="footerSocial"></div>
    </div>
  </footer>
</main>

<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">‚Üë</button>

<script>
// Wait for config to load, then populate all content
function populateContent() {
  const config = window.CONFIG;
  if (!config) {
    setTimeout(populateContent, 100);
    return;
  }

  // Apply theme colors
  if (config.theme?.colors) {
    Object.keys(config.theme.colors).forEach(key => {
      document.documentElement.style.setProperty(`--${key}`, config.theme.colors[key]);
    });
  }

  // Update logo
  const logo = document.getElementById('logo');
  if (logo && config.navigation?.logo) {
    logo.innerHTML = `
      ${config.navigation.logo.showDot ? '<span class="dot"></span>' : ''}
      <span>${config.navigation.logo.text || 'Example Site'}</span>
    `;
    if (config.navigation.logo.href) {
      logo.href = config.navigation.logo.href;
    }
  }

  // Update navigation links
  const navLinks = document.getElementById('navLinks');
  if (navLinks && config.navigation?.links) {
    navLinks.innerHTML = config.navigation.links.map(link => 
      `<a href="${link.href}">${link.icon ? link.icon + ' ' : ''}${link.label}</a>`
    ).join('');
  }

  // Update hero section
  const hero = config.content?.hero;
  if (hero) {
    const heroTitle = document.getElementById('heroTitle');
    const heroSubtitle = document.getElementById('heroSubtitle');
    const heroDescription = document.getElementById('heroDescription');
    const ctaGroup = document.getElementById('ctaGroup');
    
    if (heroTitle && hero.title) heroTitle.textContent = hero.title;
    if (heroSubtitle && hero.subtitle) heroSubtitle.textContent = hero.subtitle;
    if (heroDescription && hero.description) heroDescription.textContent = hero.description;
    
    if (ctaGroup && hero.cta) {
      let buttons = '';
      if (hero.cta.primary) {
        buttons += `<a href="${hero.cta.primary.href}" class="cta-button ${hero.cta.primary.style === 'outline' ? 'outline' : ''}">${hero.cta.primary.icon ? hero.cta.primary.icon + ' ' : ''}${hero.cta.primary.text}</a>`;
      }
      if (hero.cta.secondary) {
        buttons += `<a href="${hero.cta.secondary.href}" class="cta-button outline">${hero.cta.secondary.icon ? hero.cta.secondary.icon + ' ' : ''}${hero.cta.secondary.text}</a>`;
      }
      ctaGroup.innerHTML = buttons;
    }
  }

  // Populate stats
  const statsSection = document.getElementById('statsSection');
  const statsContainer = document.getElementById('stats');
  if (statsContainer && config.content?.stats && config.content.stats.length > 0) {
    statsSection.style.display = 'block';
    statsContainer.innerHTML = config.content.stats.map(stat => `
      <div class="stat-card">
        <div class="icon">${stat.icon || 'üìä'}</div>
        <div class="value">${stat.value}</div>
        <div class="label">${stat.label}</div>
      </div>
    `).join('');
    
    // Setup tabs
    setupStatsTabs();
    
    // Load remote stats if deployment is configured
    if (config.deployment?.enabled) {
      loadRemoteStats();
    }
  }

  // Populate features
  const featuresContainer = document.getElementById('features');
  if (featuresContainer && config.content?.features) {
    featuresContainer.innerHTML = config.content.features.map(feature => `
      <div class="feature-card" style="${feature.color ? `border-color: ${feature.color}40;` : ''}">
        <div class="icon">${feature.icon || '‚ú®'}</div>
        <h3>${feature.title}</h3>
        <p>${feature.description}</p>
      </div>
    `).join('');
  }

  // Populate sections
  const sectionsContainer = document.getElementById('sectionsContainer');
  if (sectionsContainer && config.content?.sections) {
    sectionsContainer.innerHTML = config.content.sections.map(section => `
      <div class="section" id="${section.id}" style="${section.backgroundColor ? `background: ${section.backgroundColor};` : ''} ${section.textColor ? `color: ${section.textColor};` : ''}">
        <h2>${section.title}</h2>
        ${section.subtitle ? `<p class="subtitle">${section.subtitle}</p>` : ''}
        <p>${section.content}</p>
      </div>
    `).join('');
  }

  // Populate services
  const servicesSection = document.getElementById('servicesSection');
  const servicesContainer = document.getElementById('services');
  if (servicesContainer && config.content?.services && config.content.services.length > 0) {
    servicesSection.style.display = 'block';
    servicesContainer.innerHTML = config.content.services.map(service => `
      <div class="service-card">
        <div class="icon">${service.icon || '‚öôÔ∏è'}</div>
        <h3>${service.title}</h3>
        <p>${service.description}</p>
        <div class="price">${service.price}</div>
        <ul class="features-list">
          ${service.features ? service.features.map(f => `<li>‚úì ${f}</li>`).join('') : ''}
        </ul>
      </div>
    `).join('');
  }

  // Populate pricing
  const pricingSection = document.getElementById('pricingSection');
  const pricingContainer = document.getElementById('pricing');
  if (pricingContainer && config.content?.pricing?.enabled && config.content.pricing.plans) {
    pricingSection.style.display = 'block';
    pricingContainer.innerHTML = config.content.pricing.plans.map(plan => `
      <div class="pricing-card ${plan.popular ? 'popular' : ''}">
        <div class="name">${plan.name}</div>
        <div class="price">${plan.price}<span class="period">/${plan.period}</span></div>
        <div class="description">${plan.description}</div>
        <ul class="features-list">
          ${plan.features ? plan.features.map(f => `<li>‚úì ${f}</li>`).join('') : ''}
        </ul>
        <a href="${plan.cta.href}" class="cta-button" style="width: 100%; text-align: center; display: block;">${plan.cta.text}</a>
      </div>
    `).join('');
  }

  // Populate testimonials
  const testimonialsSection = document.getElementById('testimonialsSection');
  const testimonialsContainer = document.getElementById('testimonials');
  if (testimonialsContainer && config.content?.testimonials && config.content.testimonials.length > 0) {
    testimonialsSection.style.display = 'block';
    testimonialsContainer.innerHTML = config.content.testimonials.map(testimonial => `
      <div class="testimonial-card">
        <p class="quote">"${testimonial.quote}"</p>
        <div class="author">
          <div class="author-info">
            <h4>${testimonial.name}</h4>
            <p>${testimonial.role}</p>
          </div>
        </div>
        ${testimonial.rating ? `<div class="rating">${'‚≠ê'.repeat(testimonial.rating)}</div>` : ''}
      </div>
    `).join('');
  }

  // Populate FAQ
  const faqSection = document.getElementById('faqSection');
  const faqContainer = document.getElementById('faq');
  if (faqContainer && config.content?.faq && config.content.faq.length > 0) {
    faqSection.style.display = 'block';
    faqContainer.innerHTML = config.content.faq.map(item => `
      <div class="faq-item">
        <div class="question">${item.question}</div>
        <div class="answer">${item.answer}</div>
      </div>
    `).join('');
  }

  // Populate newsletter
  const newsletterSection = document.getElementById('newsletterSection');
  const newsletterContainer = document.getElementById('newsletter');
  if (newsletterContainer && config.content?.footer?.newsletter?.enabled) {
    newsletterSection.style.display = 'block';
    const newsletter = config.content.footer.newsletter;
    newsletterContainer.innerHTML = `
      <h3>${newsletter.title}</h3>
      <p>${newsletter.description}</p>
      <form class="newsletter-form" onsubmit="event.preventDefault(); alert('Newsletter subscription would be handled here');">
        <input type="email" placeholder="${newsletter.placeholder}" required>
        <button type="submit">${newsletter.buttonText}</button>
      </form>
    `;
  }

  // Update footer
  const footerGrid = document.getElementById('footerGrid');
  const footerText = document.getElementById('footerText');
  const footerCopyright = document.getElementById('footerCopyright');
  const footerSocial = document.getElementById('footerSocial');
  
  if (config.content?.footer) {
    const footer = config.content.footer;
    
    if (footerText && footer.text) {
      footerText.textContent = footer.text;
    }
    
    if (footerCopyright && footer.copyright) {
      footerCopyright.textContent = footer.copyright;
    }
    
    if (footerGrid && footer.columns && footer.columns.length > 0) {
      footerGrid.innerHTML = footer.columns.map(column => `
        <div class="footer-column">
          <h4>${column.title}</h4>
          <ul>
            ${column.links ? column.links.map(link => `<li><a href="${link.href}">${link.label}</a></li>`).join('') : ''}
          </ul>
        </div>
      `).join('');
    }
    
    if (footerSocial && footer.social?.enabled && footer.social.links) {
      footerSocial.innerHTML = footer.social.links.map(link => `
        <a href="${link.href}" title="${link.platform}" target="_blank" rel="noopener">${link.icon}</a>
      `).join('');
    }
  }

  // Back to top button
  if (config.settings?.backToTop) {
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    });
  }
}

// Setup stats tabs
function setupStatsTabs() {
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab-content');
  
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const targetTab = btn.dataset.tab;
      
      // Update buttons
      tabButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      // Update content
      tabContents.forEach(content => {
        content.classList.remove('active');
        if (content.id === `tab-${targetTab}`) {
          content.classList.add('active');
        }
      });
      
      // Load remote stats when remote tab is clicked
      if (targetTab === 'remote' && window.CONFIG?.deployment?.enabled) {
        loadRemoteStats();
      }
    });
  });
}

// Load remote stats
async function loadRemoteStats() {
  const remoteStatsContainer = document.getElementById('remoteStats');
  const remoteStatus = document.getElementById('remoteStatus');
  const config = window.CONFIG;
  
  if (!config?.deployment?.enabled) {
    return;
  }
  
  // Show loading
  remoteStatus.innerHTML = '<div class="remote-loading">üîÑ Loading remote stats...</div>';
  remoteStatsContainer.style.display = 'none';
  
  try {
    // Try to fetch from remote API
    const apiUrl = config.deployment?.environment?.production?.apiUrl || 
                   config.deployment?.environment?.staging?.apiUrl;
    
    if (apiUrl) {
      const response = await fetch(`${apiUrl}/api/stats`);
      if (response.ok) {
        const remoteStats = await response.json();
        displayRemoteStats(remoteStats);
        remoteStatus.style.display = 'none';
        remoteStatsContainer.style.display = 'grid';
        return;
      }
    }
    
    // Fallback: Use deployment API endpoint
    const response = await fetch('/api/deployment/stats', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(config.deployment)
    });
    
    if (response.ok) {
      const result = await response.json();
      if (result.success && result.stats) {
        displayRemoteStats(result.stats);
        remoteStatus.style.display = 'none';
        remoteStatsContainer.style.display = 'grid';
        return;
      }
    }
    
    // No remote stats available
    remoteStatus.innerHTML = `
      <p>üåê Remote deployment is configured, but stats are not available.</p>
      <p style="margin-top: 8px; font-size: 14px;">Make sure your remote server is running and accessible.</p>
    `;
    remoteStatsContainer.style.display = 'none';
  } catch (error) {
    console.error('Error loading remote stats:', error);
    remoteStatus.innerHTML = `
      <div class="remote-error">
        <p>‚ùå Failed to load remote stats</p>
        <p style="margin-top: 8px; font-size: 14px;">${error.message}</p>
        <p style="margin-top: 8px; font-size: 12px;">Check your deployment configuration in Settings ‚Üí Deployment</p>
      </div>
    `;
    remoteStatsContainer.style.display = 'none';
  }
}

// Display remote stats
function displayRemoteStats(stats) {
  const remoteStatsContainer = document.getElementById('remoteStats');
  
  // Format stats similar to local stats
  const statsToShow = [
    { label: 'Total Items', value: stats.total || '0', icon: 'üì¶' },
    { label: 'Active', value: stats.active || '0', icon: '‚úÖ' },
    { label: 'In Use', value: stats.inUse || '0', icon: 'üîß' },
    { label: 'Available', value: stats.available || '0', icon: 'üìã' }
  ];
  
  remoteStatsContainer.innerHTML = statsToShow.map(stat => `
    <div class="stat-card">
      <div class="icon">${stat.icon}</div>
      <div class="value">${stat.value}</div>
      <div class="label">${stat.label}</div>
    </div>
  `).join('');
}

window.addEventListener('configLoaded', populateContent);
// Also try immediately (in case config already loaded)
populateContent();
</script>
<script>
// Smooth navigation to settings page with return path
function navigateToSettings(e) {
  if (e) e.preventDefault();
  
  // Store current location for return navigation
  const currentUrl = window.location.pathname + window.location.search;
  
  // Add fade-out animation
  document.body.style.transition = 'opacity 0.2s ease';
  document.body.style.opacity = '0';
  
  // Navigate after fade with return path
  setTimeout(() => {
    window.location.href = `settings.html?from=${encodeURIComponent(currentUrl)}`;
  }, 200);
}
</script>
</body>
</html>
